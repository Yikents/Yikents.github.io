"use strict";(self["webpackChunkpodo_cartoon"]=self["webpackChunkpodo_cartoon"]||[]).push([[532],{5532:function(t,e,i){i.r(e),i.d(e,{default:function(){return p}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"detail"},[e("div",{staticClass:"detail-header",style:{background:`rgba(0, 0, 0,${t.opacityState})`}},[e("div",{staticClass:"header-left",on:{click:t.backPrePage}},[e("span",{staticClass:"iconfont icon-arrow-left-bold"})]),e("div",{staticClass:"header-center",style:{color:`rgba(255, 255, 255,${t.opacityState})`}},[t._v(" "+t._s(t.detailDataObj?.title)+" ")]),t._m(0)]),0!=Object.keys(t.detailDataObj).length?e("div",{staticClass:"detail-body",on:{scroll:function(e){return e.stopPropagation(),t.scrollEvent(e)}}},[e("div",{staticClass:"body-container"},[e("div",{staticClass:"body-image",style:{backgroundImage:`url(${t.detailDataObj.horizontal_cover})`}},[e("div",{staticClass:"chase-button",class:{"chase-finished":t.isShowChase},on:{click:t.ChaseStateEvent}},[e("span",{staticClass:"iconfont icon-shoucang1"}),e("span",{staticClass:"i-c"},[t._v("追漫")])])]),e("div",{staticClass:"body-main"},[e("div",{staticClass:"main-title"},[t._v(t._s(t.detailDataObj.title))]),e("div",{staticClass:"main-description"},[t.detailDataObj.hall_icon_text?e("div",{staticClass:"description-first"},[e("div",{staticClass:"hall-icon-text"},[t._v(" "+t._s(t.detailDataObj.hall_icon_text)+" ")])]):t._e(),e("div",{staticClass:"description-works"},[e("div",{staticClass:"works-author"},[t._v(" "+t._s(t.detailDataObj?.author_name[0]||"未知")+" ")]),e("div",{staticClass:"works-style"},t._l(t.detailDataObj.styles,(function(i){return e("div",{key:i,staticClass:"works-style-item"},[t._v(" "+t._s(i)+" ")])})),0)]),e("div",{staticClass:"description-state"},[e("div",{staticClass:"description-state-left"},[e("span",[t._v(t._s(1==t.detailDataObj.is_finish?"已完结":"未完结"))]),t._v(" · "),e("span",[t._v("共"+t._s(t.detailDataObj.total||"0")+"话")])]),e("div",{staticClass:"description-state-right",on:{click:t.showHideEvent}},[e("span",{directives:[{name:"show",rawName:"v-show",value:!t.isShowContext,expression:"!isShowContext"}],staticClass:"iconfont icon-xiangxia"}),e("span",{directives:[{name:"show",rawName:"v-show",value:t.isShowContext,expression:"isShowContext"}],staticClass:"iconfont icon-xiangshang"})])]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowContext,expression:"isShowContext"}],staticClass:"description-detail"},[e("div",{staticClass:"detail-a"},[e("div",{staticClass:"a-text"},[t._v("作者:")]),e("div",{staticClass:"a-name"},[t._v(" "+t._s(t.detailDataObj.author_name.join(" 、")||"未知")+" ")])]),e("div",{staticClass:"detail-b"},[e("div",{staticClass:"b-brief"},[t._v("简介:")]),e("div",{staticClass:"b-text"},[t._v(" "+t._s(t.detailDataObj.classic_lines||"描述为空")+" ")])])])])]),t.isSeriesEmpty?e("div",{staticClass:"body-series"},[e("div",{staticClass:"series-title"},[t._v("系列作品")]),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.isShowSeriesLoad,expression:"!isShowSeriesLoad"}],staticClass:"series-works"},t._l(t.seriesListData,(function(i){return e("div",{key:i.id,staticClass:"works-items",on:{click:function(e){return t.getMoreData(i.id,i)}}},[e("div",{staticClass:"works-items-img",style:{backgroundImage:`url(${i.horizontal_cover})`}}),e("div",{staticClass:"works-items-text"},[t._v(t._s(i.title))])])})),0),e("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowSeriesLoad,expression:"isShowSeriesLoad"}],staticClass:"loading-icon"},[e("van-loading",{attrs:{type:"spinner",color:"#1989fa",size:"20px"}})],1)]):t._e(),0!=t.moreRecommendData.length?e("div",{staticClass:"body-recommend"},[e("div",{staticClass:"recommend-header"},[e("div",{staticClass:"recommend-header-title"},[t._v("更多推荐")]),e("div",{staticClass:"recommend-header-updata",on:{click:t.UpatePartData}},[e("span",{ref:"refreshRotate",staticClass:"iconfont icon-gengxin"}),e("span",[t._v("换一换")])])]),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.isShowMoreRecommend,expression:"!isShowMoreRecommend"}],staticClass:"recommend-content"},t._l(t.renderRecommendPart,(function(i){return e("div",{key:i.id,staticClass:"content-item",on:{click:function(e){return t.ShowPartListEvent(i.cartoon_text,i.id,i)}}},[e("div",{staticClass:"content-item-img",class:{"content-item-ig":"part"==i.cartoon_text},style:{backgroundImage:`url(${i.horizontal_cover})`}},["part"==i.cartoon_text?e("div",{staticClass:"img-count"},[t._v(" "+t._s(t.authorRecommendData.length)+"部 ")]):t._e()]),e("div",{staticClass:"content-item-title"},[t._v(t._s(i.title))]),i.cartoon_text?t._e():e("div",{staticClass:"content-item-updata"},[t._v(" "+t._s(0==i.is_finish?`更新至${i.last_ord}话`:`[完结]共${i.total}话`)+" ")]),i.cartoon_text?e("div",{staticClass:"content-item-a"},[e("div",{staticClass:"a-author"},[t._v("同作者作品")])]):t._e()])})),0),e("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowMoreRecommend,expression:"isShowMoreRecommend"}],staticClass:"loading-icon"},[e("van-loading",{attrs:{type:"spinner",color:"#1989fa",size:"20px"}})],1)]):t._e(),0==t.moreRecommendData.length?e("div",{staticClass:"load-icon"},[e("van-loading",{attrs:{type:"spinner",color:"#1989fa"}})],1):t._e()])]):t._e(),0!=Object.keys(t.detailDataObj).length?e("div",{staticClass:"detail-footer"},[e("div",{staticClass:"footer-left"},[t._m(1),e("div",{staticClass:"footer-left-text",on:{click:function(e){return e.stopPropagation(),t.closeCurrentList.apply(null,arguments)}}},[t._v("目录")])]),e("div",{staticClass:"footer-center"},[e("div",{staticClass:"footer-list"},t._l(t.renderListArr,(function(i){return e("div",{key:i.id,staticClass:"footer-item",class:{"f-active":i.id==t.activeId},on:{click:function(e){return t.selectCartoonEvent(i,i.title)}}},[t._v(" "+t._s(i.ord)+" ")])})),0)]),e("div",{staticClass:"footer-right",on:{click:function(e){return t.getImageIndexEvent(t.activeId)}}},[t._v("续看")])]):t._e(),e("transition",{attrs:{name:"move"}},[t.isShowCatalog?e("div",{staticClass:"detail-catalog"},[e("div",{staticClass:"catalog-container"},[e("div",{staticClass:"catalog-container-header",on:{click:function(e){return e.stopPropagation(),t.closeCurrentList.apply(null,arguments)}}},[e("span",{staticClass:"iconfont icon-close"})]),e("div",{staticClass:"catalog-container-body"},[e("div",{staticClass:"container-body-title"},[e("div",{staticClass:"title-l"},[t._v("全部章节("+t._s(t.renderListArr.length)+")")])]),e("div",{staticClass:"container-body-list"},[t._l(t.renderListArr,(function(i){return e("div",{key:i.id,staticClass:"c-body-item",on:{click:function(e){return t.getImageIndexEvent(i.id,i.title)}}},[e("div",{staticClass:"b-item-img"},[e("van-image",{staticClass:"b-i-ig",attrs:{src:i.cover}})],1),e("div",{staticClass:"b-item-area"},[e("div",{staticClass:"area-title"},[t._v(" "+t._s(i.title)+" ")]),e("div",{staticClass:"area-other"},[e("div",{staticClass:"area-time"},[t._v(" "+t._s(i.pub_time.split(" ")[0])+" ")]),e("div",{staticClass:"area-commend"},[e("span",{staticClass:"iconfont icon-pinglun"}),e("span",[t._v(t._s(i.comments||0))])]),e("div",{staticClass:"thumbs-up"},[e("span",{staticClass:"iconfont icon-recommend"}),e("span",[t._v(t._s(i.like_count||0))])])])])])})),e("div",{staticClass:"empty-text-des"},[t._v("到底啦~~")])],2)])]),e("div",{staticClass:"circle-r",on:{click:t.resetRankEvent}},[e("div",{staticClass:"t-r-icon"},[e("span",{staticClass:"iconfont icon-shengjiang"})]),e("div",{staticClass:"t-r-text"},[t._v(t._s(t.liftingState))])])]):t._e()]),t.isShowOther?e("div",{staticClass:"detail-other",on:{click:function(e){return e.target!==e.currentTarget?null:t.closeCurrentLayer.apply(null,arguments)}}},[e("transition",{attrs:{name:"move"}},[e("div",{staticClass:"other-container"},[e("div",{staticClass:"container-header"},[e("div",{staticClass:"other-container-left",on:{click:function(e){return e.stopPropagation(),t.closeCurrentLayer.apply(null,arguments)}}},[e("span",{staticClass:"iconfont icon-close"})]),e("div",{staticClass:"other-container-title"},[t._v(" "+t._s(t.detailDataObj?.author_name[0]||"")+"其他作品 ")])]),e("div",{staticClass:"container-body"},[e("div",{staticClass:"other-list"},t._l(t.authorRecommendData,(function(i){return e("div",{key:i.id,staticClass:"other-list-item",on:{click:function(e){return t.getMoreData(i.id)}}},[e("div",{staticClass:"list-item-img",style:{backgroundImage:`url(${i.horizontal_cover})`}}),e("div",{staticClass:"list-item-content"},[e("div",{staticClass:"item-content-title"},[t._v(" "+t._s(i.title)+" ")]),e("div",{staticClass:"item-content-des"},[e("div",{staticClass:"content-des-author"},t._l(i.authors,(function(i,s){return e("span",{key:i.id+s,staticClass:"d-a"},[t._v(t._s(i.cname))])})),0),e("div",{staticClass:"content-des-main"},[e("div",{staticClass:"des-main-left"},[e("div",{staticClass:"main-left-style"},t._l(i.styles,(function(i){return e("span",{key:i.id,staticClass:"l-s"},[t._v(t._s(i.name))])})),0),e("div",{staticClass:"main-left-finished"},[t._v(" "+t._s(1==i.is_finish?"已完成":`更新至${i.last_ord}话`)+" ")])]),e("div",{staticClass:"des-main-right"},[e("div",{staticClass:"des-main-button"},[e("span",{staticClass:"iconfont icon-shoucang"}),e("span",[t._v("追漫")])])])])])])])})),0),e("div",{staticClass:"other-tips"},[t._v("没有更多啦~~")])])])])],1):t._e(),0==Object.keys(t.detailDataObj).length?e("div",{staticClass:"empty-loading"},[e("van-loading",{attrs:{type:"spinner",color:"#1989fa"}})],1):t._e(),t.isCloseArticle?e("ArticlePreviewView",{attrs:{articleData:t.articleData,isShowArticle:t.isShowArticle,ArticleTitle:t.ArticleTitle},on:{closeArticlePage:t.closeArticlePage}}):t._e()],1)},a=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"header-right"},[e("div",{staticClass:"header-right-loading"},[e("span",{staticClass:"iconfont icon-icondownload"})]),e("div",{staticClass:"header-right-share"},[e("span",{staticClass:"iconfont icon-fenxiang1"})])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"footer-left-icon"},[e("span",{staticClass:"iconfont icon-mulu"})])}],o=(i(7658),i(7877)),n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"article-preview"},[e("div",{staticClass:"article-header"},[e("div",{staticClass:"header-left",on:{click:t.articleHidePage}},[e("span",{staticClass:"iconfont icon-arrowleft"})]),e("div",{staticClass:"header-title"},[t._v(t._s(t.ArticleTitle))])]),t.isShowArticle?t._e():e("div",{staticClass:"article-body"},[e("van-swipe",{staticClass:"body-swipe",attrs:{"show-indicators":!1,loop:!1},on:{change:t.onChange}},t._l(t.articleData,(function(t,i){return e("van-swipe-item",{key:i},[e("van-image",{staticClass:"img-item",attrs:{src:t}})],1)})),1),e("div",{staticClass:"article-body-index"},[t._v(" "+t._s(t.active)+"/"+t._s(t.articleData.length||1)+" ")])],1),t.isShowArticle?e("div",{staticClass:"loading-body"},[e("van-loading",{attrs:{type:"spinner",color:"#1989fa"}})],1):t._e()])},r=[],l={props:["articleData","isShowArticle","ArticleTitle"],data(){return{active:1}},methods:{onChange(t){this.active=t+1},articleHidePage(){this.$emit("closeArticlePage")}}},c=l,d=i(1001),h=(0,d.Z)(c,n,r,!1,null,"12718d33",null),v=h.exports,m=i(3822),g={data(){return{Did:"",isShowContext:!1,detailDataObj:{},seriesListData:[],isShowSeriesLoad:!1,isSeriesEmpty:!1,moreRecommendData:[],renderRecommendPart:[],authorRecommendData:[],isShowMoreRecommend:!1,getCount:0,timer:null,opacityState:0,isShowOther:!1,activeId:"",renderListArr:[],liftingState:"升序",isShowCatalog:!1,isShowChase:!1,isCloseArticle:!1,articleData:[],isShowArticle:!1,ArticleTitle:""}},created(){this.Did=this.$route.params.id,this.getDetailData(),this.initChaseStorage()},methods:{showHideEvent(){this.isShowContext=!this.isShowContext},backPrePage(){this.$router.go(-1)},async getDetailData(){""!=this.Did&&(this.detailDataObj=await(0,o.kt)(this.Did),this.renderListArr=this.detailDataObj.ep_list,0!=this.renderListArr.length&&(this.renderListArr.sort((function(t,e){return t.ord-e.ord})),this.activeId=this.renderListArr[0].id),this.getDetailSeriesData(),this.getMoreRecommendData())},async getDetailSeriesData(){this.isShowSeriesLoad=!0,this.seriesListData=await(0,o.RM)(this.Did),this.isShowSeriesLoad=!1,0!=this.seriesListData.length?this.isSeriesEmpty=!0:this.isSeriesEmpty=!1},async getMoreRecommendData(){this.isShowMoreRecommend=!0;let t=await(0,o.hs)(this.Did);0!=t.author_comics.length?(this.moreRecommendData=[{...t.author_comics[0],cartoon_text:"part",cartoon_count:t.author_comics.length},...t.recommend_comics],this.authorRecommendData=t.author_comics):this.moreRecommendData=t.recommend_comics,this.isShowMoreRecommend=!1,this.getUpateData(this.getCount)},getUpateData(t){this.renderRecommendPart=[];for(let e=0;e<6;e++)this.renderRecommendPart=[...this.renderRecommendPart,this.moreRecommendData[e+t]]},UpatePartData(){this.timer&&clearTimeout(this.timer);let t=this.$refs.refreshRotate;t.classList.add("refreshIt"),this.timer=setTimeout((()=>{t.classList.remove("refreshIt")}),300),this.getCount+6>this.moreRecommendData.length-6?this.getCount=0:this.getCount=this.getCount+6,this.getUpateData(this.getCount)},scrollEvent(t){t.target.scrollTop<250?this.opacityState=(t.target.scrollTop/240).toFixed(1):this.opacityState=1},closeCurrentLayer(){this.isShowOther=!1},ShowPartListEvent(t,e,i){"part"==t?this.isShowOther=!0:this.getMoreData(e,i)},getMoreData(t,e){this.isShowContext=!1,this.detailDataObj={},this.seriesListData=[],this.isShowSeriesLoad=!1,this.isSeriesEmpty=!1,this.moreRecommendData=[],this.renderRecommendPart=[],this.authorRecommendData=[],this.isShowMoreRecommend=!1,this.getCount=0,this.timer=null,this.opacityState=0,this.isShowOther=!1,this.activeId="",this.renderListArr=[],this.liftingState="升序",this.isShowCatalog=!1,this.Did=t,this.getDetailData(),this.DeliverDetailData(e)},selectCartoonEvent(t){this.activeId=t.id},resetRankEvent(){"升序"==this.liftingState?(this.renderListArr.sort((function(t,e){return e.ord-t.ord})),this.liftingState="降序"):(this.renderListArr.sort((function(t,e){return t.ord-e.ord})),this.liftingState="升序")},closeCurrentList(){this.isShowCatalog=!this.isShowCatalog},DeliverDetailData(t){let e={...t,season_id:t.id,bottom_info:t.styles[0]?.name,Did:+new Date};if(localStorage.user){let t=JSON.parse(localStorage.user);if(t[this.telephoneString])if(t[this.telephoneString].isRun){let t=this.dealTimeData();if(localStorage.historyRecord){let i=JSON.parse(localStorage.historyRecord);if(i[this.telephoneString]){let s=`${t.year}${t.month}${t.day}`,a=i[this.telephoneString].find((t=>{let i=`${t.time.year}${t.time.month}${t.time.day}`;return t.data.season_id==e.season_id&&s==i}));if(!a){let s={};s[this.telephoneString]=[...i[this.telephoneString],{data:e,time:t}],localStorage.historyRecord=JSON.stringify({...i,...s})}}else{let s={};s[this.telephoneString]=[{data:e,time:t}],localStorage.historyRecord=JSON.stringify({...i,...s})}}else{let i={};i[this.telephoneString]=[{data:e,time:t}],localStorage.historyRecord=JSON.stringify(i)}}else this.$router.push({path:"/login"});else this.$router.push({path:"/login"})}else this.$router.push({path:"/login"})},dealTimeData(){let t=new Date,e=t.getFullYear(),i=t.getMonth()+1,s=t.getDate(),a=t.getHours(),o=t.getMinutes(),n=t.getSeconds();return a=a<10?"0"+a:a,o=o<10?"0"+o:o,n=n<10?"0"+n:n,{year:e,month:i,day:s,hour:a,minute:o,second:n}},ChaseStateEvent(){if(localStorage.chaseDataRecord){let t=JSON.parse(localStorage.chaseDataRecord);if(t[this.telephoneString]){let e=t[this.telephoneString],i=e.find((t=>t.id==this.Did));i?(this.isShowChase=!1,t[this.telephoneString]=e.filter((t=>t.id!=this.Did)),localStorage.chaseDataRecord=JSON.stringify(t)):(this.isShowChase=!0,t[this.telephoneString].push(this.detailDataObj),localStorage.chaseDataRecord=JSON.stringify(t))}else{this.isShowChase=!0;let e={};e[this.telephoneString]=[this.detailDataObj],localStorage.chaseDataRecord=JSON.stringify({...t,...e})}}else{this.isShowChase=!0;let t={};t[this.telephoneString]=[this.detailDataObj],localStorage.chaseDataRecord=JSON.stringify(t)}},initChaseStorage(){if(localStorage.chaseDataRecord){let t=JSON.parse(localStorage.chaseDataRecord);if(t[this.telephoneString]){let e=t[this.telephoneString],i=e.find((t=>t.id==this.Did));this.isShowChase=!!i}else this.isShowChase=!1}else this.isShowChase=!1},async getImageIndexEvent(t,e){this.isShowArticle=!0,this.ArticleTitle=e,this.closeArticlePage();let i=await(0,o.J_)(t);this.getImageToken(JSON.stringify(i))},async getImageToken(t){let e=await(0,o.tv)(t),i=e.map((t=>`${t.url}?token=${t.token}`));this.articleData=[...i],this.isShowArticle=!1},closeArticlePage(){this.isCloseArticle=!this.isCloseArticle}},computed:{...(0,m.rn)(["telephoneString"])},components:{ArticlePreviewView:v}},C=g,u=(0,d.Z)(C,s,a,!1,null,"425a1d48",null),p=u.exports}}]);
//# sourceMappingURL=532.3db84678.js.map